<%-layout ("./layouts/boilerplate.ejs")%>

 <body>
             
          <div class="row mt-3">
            <div class="col-8 offset-2">
    <h3 class="mt-3">Edit your listing listing</h3><br>
    <form method="post" action="/listing/<%= listing._id %>?_method=PUT" novalidate class="needs-validation"  enctype="multipart/form-data">
        <div class="mb-3">
            <label for="title" 
            class="form-label">
            Title
        </label>
            <input name="listing[title]" 
            value="<%=listing.title%>" type="text"  class="form-control" required  >
 
            <div class="valid-feedback"> Title Looks good</div>
        <div class="invalid-feedback">Please Enter Title</div>
        </div>

        <div class="mb-3">
            <label for="description" 
            class="form-label">
            Description
        </label>
        <textarea name="listing[description]"<%=listing.description%> class="form-control" required><%=listing.description%></textarea>

 
        
        <div class="invalid-feedback">Please Enter Description</div>
        </div>

        <div class="mb-3">
            <div>Original Listing Image:</div>
            <img style="height: 200px; width: 250px;"  src="<%= listing.image.url %>">
        </div>

        <div class="mb-3">
            <label for="imge" 
            class="form-label">
            Upload New  Image
        </label>
        <input name="listing[image]"   type="file" class="form-control" >
        </div>

        <div class="row">
            <div class="mb-3 col-md-4">
            <label for="Price" 
            class="form-label">
            Price
        </label>
        <input name="listing[price]" value="<%=listing.price %>"  type="number" class="form-control" required>

        <div class="invalid-feedback">Please Enter Price</div>

        </div>

        <div class="mb-3 col-md-8" >
            <label for="Country" 
            class="form-label">
            Country
        </label>
        <input name="listing[country]" value="<%=listing.country %>"  type="text" class="form-control" required>

        <div class="invalid-feedback">Please Enter Country</div>

        </div></div>

        <div class="mb-3">
            <label for="location" 
            class="form-label">
            Location
        </label>
        <input name="listing[location]" value="<%=listing.location %>"  type="text" class="form-control" required>
       
    
        <div class="invalid-feedback">Please Enter City</div>

    </div>
    <div class="mb-3">
        <label for="catagory" 
        class="form-label">
        catagory
    </label>
    <input name="listing[catagory]" value="<%=listing.catagory %>"  type="text" class="form-control" required>
   <p style="color: green;">please enter catagories which is:arctic,Boat,camping,castele,city,domes,farm,mountain,pools,rooms<br>Use Only this catagories </p>

    <div class="invalid-feedback">Please Enter catagory</div>

</div>

        <br><br>
         <button class="btn btn-dark edit-btn mb-3">Edit</button>

    </form>

</body>
</div>
</div>









<script>
    // Example starter JavaScript for disabling form submissions if there are invalid fields
       (() => {
           'use strict'
         
           // Fetch all the forms we want to apply custom Bootstrap validation styles to
           const forms = document.querySelectorAll('.needs-validation')
         
           // Loop over them and prevent submission
           Array.from(forms).forEach(form => {
             form.addEventListener('submit', event => {
               if (!form.checkValidity()) {
                 event.preventDefault()
                 event.stopPropagation()
               }
         
               form.classList.add('was-validated')
             }, false)
           })
         })()
         </script>